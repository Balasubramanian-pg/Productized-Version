Here's the **SAP table-level mapping** for your financial metrics, optimized for clarity and technical precision:

---

### **SAP Tables for Financial Metrics (Table-Level Mapping)**

| **Metric Name**               | **Key SAP Tables**                                                                 | **Module** | **Data Type**                          |
|-------------------------------|-----------------------------------------------------------------------------------|------------|----------------------------------------|
| **EBITDA**                    | `FAGLFLEXA` (GL Actuals), `BSEG` (Tax/Interest), `ANLC` (Depreciation)            | FI/AA      | P&L, Asset Values                     |
| **Return on Equity (ROE)**     | `FAGLFLEXA` (Net Income), `SKAT` (Equity Accounts)                                | FI         | GL Balances, Master Data              |
| **Working Capital Ratio**      | `FAGLFLEXA` (Assets/Liabilities), `BSIS` (Open Items)                             | FI         | Balance Sheet Accounts                |
| **Debt-to-Equity Ratio**       | `FAGLFLEXA` (Debt), `SKAT` (Equity)                                              | FI         | GL Account Balances                   |
| **Cash Conversion Cycle (CCC)**| `BSID` (Receivables), `MSEG` (Inventory), `BSIK` (Payables)                      | FI/MM      | Transactional Documents               |
| **Debt Service Coverage**      | `FAGLFLEXA` (Operating Income), `BSEG` (Debt Payments)                           | FI         | P&L, Liability Payments              |
| **Return on Assets (ROA)**     | `FAGLFLEXA` (Net Income), `ANLA` (Asset Master)                                   | FI/AA      | Profitability, Fixed Assets          |
| **Inventory Turnover**         | `MSEG` (Goods Movements), `MBEW` (Inventory Valuation)                           | MM         | Material Flow, Costing               |
| **Quick Ratio**                | `FAGLFLEXA` (Liquid Assets), `MARD` (Stock), `BSIS` (Liabilities)                | FI/MM      | GL Balances, Stock Quantities        |
| **Cash Flow**                  | `FAGLFLEXA` (Operating), `ANLC` (Investing), `BSEG` (Financing)                  | FI/AA      | Cash Flow Statement Components       |

---

### **Key Table Explanations:**

1. **`FAGLFLEXA`**  
   - **Purpose**: New General Ledger actuals (replaces `BSIS`/`BSEG` in S/4HANA)  
   - **Critical For**: All P&L and balance sheet metrics (ROE, ROA, EBITDA)  

2. **`BSEG`**  
   - **Legacy Use**: Tax/interest postings in classic GL (still used in ECC)  

3. **`ANLC`/`ANLA`**  
   - **Asset Accounting**: Depreciation (`ANLC-NAFAV`), book values (`ANLA-ANBTR`)  

4. **`MSEG`/`MBEW`**  
   - **Material Flow**: Goods movements (`MSEG-MENGE`), inventory values (`MBEW-STPRS`)  

5. **`BSID`/`BSIK`**  
   - **Open Items**: Customer/vendor open items for DSO/DPO calculations  

---

### **Module Cross-Reference:**
- **FI (Finance)**: `FAGLFLEXA`, `BSEG`, `BSID`, `BSIK`, `SKAT`  
- **AA (Asset Accounting)**: `ANLA`, `ANLC`  
- **MM (Materials)**: `MSEG`, `MBEW`, `MARD`  

---

### **Next Steps:**
1. **Field-Level Details**: For exact field names (e.g., `FAGLFLEXA-HSL` for amounts)  
2. **Extraction Logic**: Sample ABAP/SQL queries to pull these metrics  
3. **Period Filters**: How to use `BUDAT` (posting date) and `GJAHR` (fiscal year)  
